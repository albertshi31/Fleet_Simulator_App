(this["webpackJsonpfleet-simulator"]=this["webpackJsonpfleet-simulator"]||[]).push([[0],{160:function(t,e,i){},164:function(t,e){},168:function(t,e,i){"use strict";i.r(e);var n=i(4),o=i.n(n),a=i(120),r=i.n(a),c=(i(160),i(13)),s=i(142),l=i(136),d=i(177),u=i(124),m=i(184),f=i(188),g=i(186),h=i(178),b=i(36);var p=new l.a({color:[255,255,255],intensity:1}),j=new d.a({color:[255,255,255],intensity:2,position:[-74.762758,40.226667,8e3]}),w={buildingColor:[175,175,175],trailColor0:[255,0,0],trailColor1:[173,216,230],trailColor2:[0,0,139],trailColor3:[144,238,144],trailColor4:[0,100,0],trailColor5:[0,0,0],material:{ambient:.1,diffuse:.6,shininess:32,specularColor:[60,64,70]},effects:[new u.a({ambientLight:p,pointLight:j})]},O={longitude:-74.762758,latitude:40.226667,zoom:12,pitch:45,bearing:0};var S=function(t){var e=t.buildings,i=void 0===e?BUILDINGS:e,o=t.trips,a=void 0===o?TRIPS:o,r=t.waiting_passengers,l=void 0===r?WAITING_PASSENGERS:r,d=t.waiting_vehicles,u=void 0===d?WAITING_VEHICLES:d,p=t.trailLength,j=void 0===p?15:p,S=t.initialViewState,v=void 0===S?O:S,x=t.mapStyle,C=void 0===x?"https://basemaps.cartocdn.com/gl/positron-nolabels-gl-style/style.json":x,A=t.theme,I=void 0===A?w:A,T=t.loopLength,_=void 0===T?LOOP_LENGTH:T,N=t.animationSpeed,P=void 0===N?ANIMATION_SPEED:N,E=t.startTime,M=void 0===E?START_TIME:E,y=Object(n.useState)(M),k=Object(c.a)(y,2),L=k[0],F=k[1];!function(t){var e="AM";t/3600>=12&&(e="PM"),t/3600<=6||t/3600>=18?($("#time").css("background-color","black"),$("#time").css("color","white")):($("#time").css("background-color","white"),$("#time").css("color","black"));var i=Math.floor(t/3600)%12,n=Math.floor(t/60)%60,o=t%60;0==i&&(i=12),i=i<10?"0".concat(i):i,n=n<10?"0".concat(n):n,o=o<10?"0".concat(o):o;var a="".concat(i,":").concat(n,":").concat(o," ").concat(e);$("#time").text(a)}(L),function(t){var e=METRIC_ANIMATIONS.NumOfActiveVehicles[t],i=METRIC_ANIMATIONS.NumOfActivePassengers[t],n=METRIC_ANIMATIONS.AVO[t],o=METRIC_ANIMATIONS.PassengersLeft[t];$("#AVO").html(n.toFixed(2).toString()),$("#NumOfActiveVehicles").html(e.toString()),$("#NumOfActivePassengers").html(i.toString()),$("#PassengersLeft").html(o.toString())}(L);var V=Object(n.useState)({}),R=Object(c.a)(V,1)[0],B=function t(){F((function(t){return(t+P)%_})),R.id=window.requestAnimationFrame(t)};Object(n.useEffect)((function(){return R.id=window.requestAnimationFrame(B),function(){return window.cancelAnimationFrame(R.id)}}),[R]);var G=[[-74.7961659355,40.2573225184],[-74.7376353,40.2096325996],[-74.7365560004,40.2049442004],[-74.7385219074,40.2022611843],[-74.7426864838,40.2038359521],[-74.7446668987,40.2066230058],[-74.7465944633,40.1993091366],[-74.7480265061,40.2104303162],[-74.7505364126,40.2047297942],[-74.7504727864,40.2002140791],[-74.7518840001,40.1986588377],[-74.755661277,40.2056889816],[-74.7576635025,40.1976591962],[-74.7587885045,40.2126131531],[-74.7615293049,40.2074477068],[-74.761859907,40.2043401875],[-74.734932536,40.2169911691],[-74.7370159997,40.2238808003],[-74.7425452787,40.2295385842],[-74.7407666995,40.2165242004],[-74.7414561954,40.2121634917],[-74.7432870693,40.2248157211],[-74.7423656535,40.2198021342],[-74.748154744,40.2156924937],[-74.7392115001,40.2385422004],[-74.7416398003,40.2329152998],[-74.7435337003,40.2428287],[-74.7460721004,40.2373463471],[-74.7521018624,40.2435554],[-74.7496987996,40.2293870998],[-74.7514298996,40.2352332001],[-74.7512439996,40.2239780002],[-74.7542796002,40.2190475002],[-74.7539253887,40.2105825681],[-74.7569956001,40.2236366996],[-74.7584613215,40.2298211467],[-74.7602839738,40.2345399443],[-74.7615481001,40.2277391],[-74.758984512,40.2206847175],[-74.7638448998,40.2147323998],[-74.7702942244,40.2210936874],[-74.7732648922,40.2241694689],[-74.7718024132,40.235271129],[-74.7731734002,40.2322579001],[-74.7773986004,40.2295121996],[-74.778804303,40.2370876168],[-74.7869060838,40.2381973502],[-74.7916969269,40.231672496],[-74.7932996941,40.2422722129],[-74.7999188569,40.2466836077],[-74.7896579151,40.2522172286],[-74.7864479833,40.2487596207],[-74.7802626865,40.242385832],[-74.7745876733,40.2381497606],[-74.7717776552,40.2488241839],[-74.7617933974,40.2451731526],[-74.7540253465,40.2417532347],[-74.7813941689,40.23214321892]],z=[I.trailColor0,I.trailColor1,I.trailColor2,I.trailColor3,I.trailColor4,I.trailColor5],D=[new h.a({id:"trips",data:a,getPath:function(t){return t.path},getTimestamps:function(t){return t.timestamps},getColor:function(t){return z[t.vendor]},opacity:.8,widthMinPixels:10,rounded:!0,trailLength:j,currentTime:L,shadowEnabled:!1}),new f.a({id:"buildings",data:i,extruded:!0,wireframe:!1,opacity:.5,getPolygon:function(t){return t.polygon},getElevation:function(t){return t.height},getFillColor:I.buildingColor,material:I.material}),new g.a({id:"waiting_passengers",data:l[L],getPosition:function(t){return G[t.c]},getText:function(t){return t.n},getSize:20,getColor:[255,0,0],getTextAnchor:"start",getAlignmentBaseline:"bottom",getPixelOffset:[5,5],parameters:{depthTest:!1}}),new g.a({id:"waiting_vehicles",data:u[L],getPosition:function(t){return G[t.c]},getText:function(t){return t.n},getSize:20,getColor:[79,130,247],getTextAnchor:"end",getAlignmentBaseline:"bottom",getPixelOffset:[-5,5],parameters:{depthTest:!1}})];return Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{style:{left:"0px",top:"0px",position:"absolute",zIndex:"2",width:"50%"},children:[Object(b.jsx)("button",{onClick:function(){window.location.href="/animation?animation_speed="+P},children:Object(b.jsx)("i",{class:"fas fa-redo"})}),Object(b.jsx)("button",{onClick:function(){window.location.href="/animation?animation_speed=1&start_time="+M},children:"1x Speed"}),Object(b.jsx)("button",{onClick:function(){window.location.href="/animation?animation_speed=10&start_time="+M},children:"10x Speed"}),Object(b.jsx)("button",{onClick:function(){window.location.href="/animation?animation_speed=100&start_time="+M},children:"100x Speed"}),Object(b.jsx)("button",{onClick:function(){window.location.href="/animation?animation_speed="+P+"&start_time=1000"},children:"Skip to 1000 seconds"}),Object(b.jsx)("br",{}),Object(b.jsx)("input",{type:"range",min:"0",max:_,id:"timeSelector"}),Object(b.jsx)("br",{}),Object(b.jsxs)("button",{onClick:function(){var t=document.getElementById("timeSelector").value;window.location.href="/animation?animation_speed="+P+"&start_time="+t},children:["Skip to ",Object(b.jsx)("span",{id:"timeSelectedValue"})," seconds"]})]}),Object(b.jsx)(m.a,{layers:D,effects:I.effects,initialViewState:v,controller:!0,children:Object(b.jsx)(s.a,{reuseMaps:!0,mapStyle:C,preventStyleDiffing:!0})})]})},v=function(t){t&&t instanceof Function&&i.e(3).then(i.bind(null,191)).then((function(e){var i=e.getCLS,n=e.getFID,o=e.getFCP,a=e.getLCP,r=e.getTTFB;i(t),n(t),o(t),a(t),r(t)}))};r.a.render(Object(b.jsx)(o.a.StrictMode,{children:Object(b.jsx)(S,{})}),document.getElementById("root")),v()},96:function(t,e){}},[[168,1,2]]]);
//# sourceMappingURL=main.9551ae85.chunk.js.map