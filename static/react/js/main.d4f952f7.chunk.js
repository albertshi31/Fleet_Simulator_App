(this["webpackJsonpfleet-simulator"]=this["webpackJsonpfleet-simulator"]||[]).push([[0],{106:function(e,t){},133:function(e,t){},144:function(e,t){},175:function(e,t,n){},180:function(e,t){},183:function(e,t,n){"use strict";n.r(t);var i=n(5),a=n.n(i),o=n(131),s=n.n(o),r=(n(175),n(9)),c=n.n(r),l=n(0),u=n(14),d=n(13),p=n(20),b=n(152),j=n(149),h=n(194),g=n(137),m=n(200),f=n(203),x=n(195),v=n(202),O=n(201),_=n(19);function w(){return(w=Object(p.a)(c.a.mark((function e(t){var n,i,a,o,s,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.a)("https://raw.githubusercontent.com/gdl2/Fleet_Simulator_App/master/static/Trenton/metric_animations.json",v.a);case 2:n=e.sent,i=n.NumOfActiveVehicles[t],a=n.NumOfActivePassengers[t],o=n.AVO[t],s=n.PassengersLeft[t],r=n.ServedPassengers[t],$("#AVO").html(o.toFixed(2).toString()),$("#NumOfActiveVehicles").html(i.toString()),$("#NumOfActivePassengers").html(a.toString()),$("#PassengersLeft").html(s.toString()),$("#ServedPassengers").html(r.toString());case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){return(y=Object(p.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.a)("https://raw.githubusercontent.com/gdl2/Fleet_Simulator_App/master/static/Trenton/index_metrics.json",v.a);case 2:t=e.sent,$("#total_passengers_served").html(t.total_passengers_served.toString()),$("#total_passengers_missed").html(t.total_passengers_missed.toString()),$("#total_vehicle_miles_traveled").html(t.total_vehicle_miles_traveled.toFixed(2).toString()),$("#empty_vehicle_miles_traveled").html(t.empty_vehicle_miles_traveled.toFixed(2).toString()),$("#avg_passenger_wait_time").html(t.avg_passenger_wait_time.toFixed(2).toString()),$("#p90_passenger_wait_time").html(t.p90_passenger_wait_time.toFixed(2).toString()),$("#p99_passenger_wait_time").html(t.p99_passenger_wait_time.toFixed(2).toString()),$("#total_vehicles_used").html(t.total_vehicles_used.toString());case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var S=new j.a({color:[255,255,255],intensity:1}),k=new h.a({color:[255,255,255],intensity:2,position:[-74.762758,40.226667,8e3]}),C={buildingColor:[175,175,175],trailColor0:[255,0,0],trailColor1:[173,216,230],trailColor2:[0,0,139],trailColor3:[144,238,144],trailColor4:[0,100,0],material:{ambient:.1,diffuse:.6,shininess:32,specularColor:[60,64,70]},effects:[new g.a({ambientLight:S,pointLight:k})]},P={longitude:-74.76742569645,latitude:40.2274908573,zoom:12,pitch:45,bearing:0},I="https://raw.githubusercontent.com/gdl2/Fleet_Simulator_App/master/static/Trenton/depotbuildings.json",F="https://raw.githubusercontent.com/gdl2/Fleet_Simulator_App/master/static/Trenton/trips.json";var A=function(e){var t=e.buildings,n=void 0===t?I:t,a=e.trips,o=void 0===a?F:a,s=e.trailLength,r=void 0===s?15:s,c=e.initialViewState,p=void 0===c?P:c,j=e.mapStyle,h=void 0===j?"https://basemaps.cartocdn.com/gl/positron-nolabels-gl-style/style.json":j,g=e.theme,v=void 0===g?C:g,O=e.loopLength,S=void 0===O?87109:O,k=e.startingAnimationSpeed,A=void 0===k?1:k,T=e.startTime,E=void 0===T?0:T,L=Object(i.useState)([]),M=Object(d.a)(L,2),z=M[0],B=M[1],V=Object(i.useState)(A),D=Object(d.a)(V,2),N=D[0],q=D[1],J=Object(i.useState)(N),Z=Object(d.a)(J,2),G=Z[0],H=Z[1],K=Object(i.useState)(E),Q=Object(d.a)(K,2),R=Q[0],U=Q[1];!function(e){var t="AM";e/3600>=12&&(t="PM"),e/3600<=6||e/3600>=18?($("#time").css("background-color","black"),$("#time").css("color","white")):($("#time").css("background-color","white"),$("#time").css("color","black"));var n=Math.floor(e/3600)%12,i=Math.floor(e/60)%60,a=e%60;0==n&&(n=12),n=n<10?"0".concat(n):n,i=i<10?"0".concat(i):i,a=a<10?"0".concat(a):a;var o="".concat(n,":").concat(i,":").concat(a," ").concat(t);$("#time").text(o)}(R),function(e){w.apply(this,arguments)}(R),function(){y.apply(this,arguments)}();var W=Object(i.useState)({}),X=Object(d.a)(W,1)[0],Y=function e(){U((function(e){return(e+N)%S})),X.id=window.requestAnimationFrame(e)};Object(i.useEffect)((function(){return X.id=window.requestAnimationFrame(Y),function(){return window.cancelAnimationFrame(X.id)}}),[X,N,R,G,z]);var ee=[v.trailColor0,v.trailColor1,v.trailColor2,v.trailColor3,v.trailColor4],te=[new x.a({id:"trips",data:o,getPath:function(e){return e.path},getTimestamps:function(e){return e.timestamps},getColor:function(e){var t=e.vendor;return z.includes(t)?[0,0,0,0]:ee[t]},updateTriggers:{getColor:z},opacity:1,widthMinPixels:10,rounded:!0,trailLength:r,currentTime:R,shadowEnabled:!1,pickable:!0}),new f.a({id:"buildings",data:n,extruded:!0,wireframe:!1,opacity:.5,getPolygon:function(e){return e.polygon},getElevation:function(e){return e.height},getFillColor:v.buildingColor,material:v.material,pickable:!0})];return Object(_.jsxs)("div",{children:[Object(_.jsx)("div",{id:"topright",style:{position:"absolute",bottom:"10px",right:"0",zIndex:"1"},children:Object(_.jsxs)("div",{class:"my-legend",children:[Object(_.jsx)("div",{class:"legend-title",children:"Car Occupancy"}),Object(_.jsx)("div",{class:"legend-scale",children:Object(_.jsxs)("ul",{class:"legend-labels",children:[Object(_.jsxs)("li",{children:[Object(_.jsx)("input",{type:"checkbox",id:"zeroPax",value:"0",onClick:function(){var e="#zeroPax",t=Object(u.a)(z),n=[];n=$(e).prop("checked")?t.filter((function(t){return t!=parseInt($(e).val())})):t.concat(parseInt($(e).val())),console.log(n),B(n)}}),Object(_.jsxs)("label",{for:"zeroPax",children:[Object(_.jsx)("span",{style:{background:"#FF0000"}}),"Zero Passengers"]})]}),Object(_.jsxs)("li",{children:[Object(_.jsx)("input",{type:"checkbox",id:"onePax",value:"1",onClick:function(){var e="#onePax",t=Object(u.a)(z),n=[];n=$(e).prop("checked")?t.filter((function(t){return t!=parseInt($(e).val())})):t.concat(parseInt($(e).val())),console.log(n),B(n)}}),Object(_.jsxs)("label",{for:"onePax",children:[Object(_.jsx)("span",{style:{background:"#ADD8E6"}}),"One Passenger"]})]}),Object(_.jsxs)("li",{children:[Object(_.jsx)("input",{type:"checkbox",id:"twoPax",value:"2",onClick:function(){var e="#twoPax",t=Object(u.a)(z),n=[];n=$(e).prop("checked")?t.filter((function(t){return t!=parseInt($(e).val())})):t.concat(parseInt($(e).val())),console.log(n),B(n)}}),Object(_.jsxs)("label",{for:"twoPax",children:[Object(_.jsx)("span",{style:{background:"#00008B"}}),"Two Passengers"]})]}),Object(_.jsxs)("li",{children:[Object(_.jsx)("input",{type:"checkbox",id:"threePax",value:"3",onClick:function(){var e="#threePax",t=Object(u.a)(z),n=[];n=$(e).prop("checked")?t.filter((function(t){return t!=parseInt($(e).val())})):t.concat(parseInt($(e).val())),console.log(n),B(n)}}),Object(_.jsxs)("label",{for:"threePax",children:[Object(_.jsx)("span",{style:{background:"#90EE90"}}),"Three Passengers"]})]}),Object(_.jsxs)("li",{children:[Object(_.jsx)("input",{type:"checkbox",id:"fourPax",value:"4",onClick:function(){var e="#fourPax",t=Object(u.a)(z),n=[];n=$(e).prop("checked")?t.filter((function(t){return t!=parseInt($(e).val())})):t.concat(parseInt($(e).val())),console.log(n),B(n)}}),Object(_.jsxs)("label",{for:"fourPax",children:[Object(_.jsx)("span",{style:{background:"#006400"}}),"Four Passengers"]})]})]})})]})}),Object(_.jsxs)("div",{style:{position:"absolute",bottom:"0",left:"30%",width:"40%",textAlign:"center",zIndex:"2"},children:[Object(_.jsx)("button",{onClick:function(){U(Math.max(0,R-1))},children:Object(_.jsx)("i",{class:"fas fa-step-backward"})}),Object(_.jsx)("button",{onClick:function(){q(G)},children:Object(_.jsx)("i",{class:"fa fa-play"})}),Object(_.jsx)("button",{onClick:function(){H(N),q(0)},children:Object(_.jsx)("i",{class:"fa fa-stop"})}),Object(_.jsx)("button",{onClick:function(){U((R+1)%S)},children:Object(_.jsx)("i",{class:"fas fa-step-forward"})}),Object(_.jsx)("button",{onClick:function(){H(1),q(1),U(0)},children:Object(_.jsx)("i",{class:"fas fa-redo"})}),Object(_.jsx)("br",{}),Object(_.jsxs)("label",{for:"speedInput",children:["Speed: ",N,"x"]}),Object(_.jsx)("input",Object(l.a)({style:{paddingTop:"5px",width:"70%",float:"right"},id:"speedInput",onChange:function(){q(parseInt(document.getElementById("speedSelector").value)),H(parseInt(document.getElementById("speedSelector").value))},type:"range",value:N,min:"0",max:"50"},"id","speedSelector")),Object(_.jsx)("br",{}),Object(_.jsxs)("label",{for:"timeInput",children:["Time: ",R," sec"]}),Object(_.jsx)("input",Object(l.a)({style:{width:"70%",float:"right"},id:"timeInput",onChange:function(){U(parseInt(document.getElementById("timeSelector").value)%S)},type:"range",value:R,min:"0",max:S},"id","timeSelector"))]}),Object(_.jsx)(m.a,{layers:te,effects:v.effects,initialViewState:p,controller:!0,getTooltip:function(e){var t=e.object;return t&&t.m},children:Object(_.jsx)(b.a,{reuseMaps:!0,mapStyle:h,preventStyleDiffing:!0})})]})},T=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,206)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,o=t.getLCP,s=t.getTTFB;n(e),i(e),a(e),o(e),s(e)}))};s.a.render(Object(_.jsx)(a.a.StrictMode,{children:Object(_.jsx)(A,{})}),document.getElementById("root")),T()}},[[183,1,2]]]);
//# sourceMappingURL=main.d4f952f7.chunk.js.map