(this["webpackJsonpfleet-simulator"]=this["webpackJsonpfleet-simulator"]||[]).push([[0],{160:function(t,e,i){},164:function(t,e){},168:function(t,e,i){"use strict";i.r(e);var n=i(4),o=i.n(n),a=i(120),r=i.n(a),s=(i(160),i(0)),c=i(13),l=i(142),d=i(136),u=i(177),g=i(124),f=i(184),m=i(188),b=i(186),p=i(191),j=i(178),h=i(27);var O=new d.a({color:[255,255,255],intensity:1}),S=new u.a({color:[255,255,255],intensity:2,position:[-74.762758,40.226667,8e3]}),v={buildingColor:[175,175,175],trailColor0:[255,0,0],trailColor1:[173,216,230],trailColor2:[0,0,139],trailColor3:[144,238,144],trailColor4:[0,100,0],trailColor5:[0,0,0],material:{ambient:.1,diffuse:.6,shininess:32,specularColor:[60,64,70]},effects:[new g.a({ambientLight:O,pointLight:S})]},x={longitude:-74.762758,latitude:40.226667,zoom:12,pitch:45,bearing:0};var I=function(t){var e=t.buildings,i=void 0===e?BUILDINGS:e,o=t.depot_locations,a=void 0===o?DEPOT_LOCATIONS:o,r=t.trips,d=void 0===r?TRIPS:r,u=t.missed_passengers,g=void 0===u?MISSED_PASSENGERS:u,O=t.waiting,S=void 0===O?WAITING:O,I=t.trailLength,C=void 0===I?15:I,T=t.initialViewState,A=void 0===T?x:T,w=t.mapStyle,P=void 0===w?"https://basemaps.cartocdn.com/gl/positron-nolabels-gl-style/style.json":w,y=t.theme,M=void 0===y?v:y,N=t.loopLength,E=void 0===N?LOOP_LENGTH:N,_=t.startingAnimationSpeed,k=void 0===_?ANIMATION_SPEED:_,L=t.startTime,F=void 0===L?START_TIME:L,R=Object(n.useState)(k),B=Object(c.a)(R,2),D=B[0],V=B[1],z=Object(n.useState)(D),G=Object(c.a)(z,2),q=G[0],J=G[1],H=Object(n.useState)(F),U=Object(c.a)(H,2),W=U[0],K=U[1];!function(t){var e="AM";t/3600>=12&&(e="PM"),t/3600<=6||t/3600>=18?($("#time").css("background-color","black"),$("#time").css("color","white")):($("#time").css("background-color","white"),$("#time").css("color","black"));var i=Math.floor(t/3600)%12,n=Math.floor(t/60)%60,o=t%60;0==i&&(i=12),i=i<10?"0".concat(i):i,n=n<10?"0".concat(n):n,o=o<10?"0".concat(o):o;var a="".concat(i,":").concat(n,":").concat(o," ").concat(e);$("#time").text(a)}(W),function(t){var e=METRIC_ANIMATIONS.NumOfActiveVehicles[t],i=METRIC_ANIMATIONS.NumOfActivePassengers[t],n=METRIC_ANIMATIONS.AVO[t],o=METRIC_ANIMATIONS.PassengersLeft[t],a=METRIC_ANIMATIONS.ServedPassengers[t];$("#AVO").html(n.toFixed(2).toString()),$("#NumOfActiveVehicles").html(e.toString()),$("#NumOfActivePassengers").html(i.toString()),$("#PassengersLeft").html(o.toString()),$("#ServedPassengers").html(a.toString())}(W);var Q=Object(n.useState)({}),X=Object(c.a)(Q,1)[0],Y=function t(){K((function(t){return(t+D)%E})),X.id=window.requestAnimationFrame(t)};Object(n.useEffect)((function(){return X.id=window.requestAnimationFrame(Y),function(){return window.cancelAnimationFrame(X.id)}}),[X,D,W,q]);var Z=a.Coordinates,tt=[M.trailColor0,M.trailColor1,M.trailColor2,M.trailColor3,M.trailColor4,M.trailColor5],et=[new j.a({id:"trips",data:d,getPath:function(t){return t.path},getTimestamps:function(t){return t.timestamps},getColor:function(t){return tt[t.vendor]},opacity:.8,widthMinPixels:10,rounded:!0,trailLength:C,currentTime:W,shadowEnabled:!1,pickable:!0}),new m.a({id:"buildings",data:i,extruded:!0,wireframe:!1,opacity:.5,getPolygon:function(t){return t.polygon},getElevation:function(t){return t.height},getFillColor:M.buildingColor,material:M.material}),new b.a({id:"waiting_passengers",data:S[W],getPosition:function(t){return Z[t.c.split(" ")[0]]},getText:function(t){return t.c.split(" ")[1]},getSize:20,getColor:[255,0,0],getTextAnchor:"start",getAlignmentBaseline:"bottom",getPixelOffset:[5,5],parameters:{depthTest:!1}}),new b.a({id:"waiting_vehicles",data:S[W],getPosition:function(t){return Z[t.c.split(" ")[0]]},getText:function(t){return t.c.split(" ")[2]},getSize:20,getColor:[79,130,247],getTextAnchor:"end",getAlignmentBaseline:"bottom",getPixelOffset:[-5,5],parameters:{depthTest:!1}}),new p.a({id:"missed_passengers",data:g[W],getPosition:function(t){return Z[t.c]},getRadius:100,filled:!0,getFillColor:[255,0,0],opacity:.5,radiusMinPixels:1,radiusMaxPixels:200,parameters:{depthTest:!1},pickable:!0})];return Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{style:{position:"absolute",bottom:"0",left:"30%",width:"40%",textAlign:"center",zIndex:"2"},children:[Object(h.jsx)("button",{onClick:function(){K(Math.max(0,W-1))},children:Object(h.jsx)("i",{class:"fas fa-step-backward"})}),Object(h.jsx)("button",{onClick:function(){V(q)},children:Object(h.jsx)("i",{class:"fa fa-play"})}),Object(h.jsx)("button",{onClick:function(){J(D),V(0)},children:Object(h.jsx)("i",{class:"fa fa-stop"})}),Object(h.jsx)("button",{onClick:function(){K((W+1)%E)},children:Object(h.jsx)("i",{class:"fas fa-step-forward"})}),Object(h.jsx)("button",{onClick:function(){J(1),V(1),K(0)},children:Object(h.jsx)("i",{class:"fas fa-redo"})}),Object(h.jsx)("br",{}),Object(h.jsxs)("label",{for:"speedInput",children:["Speed: ",D,"x"]}),Object(h.jsx)("input",Object(s.a)({style:{width:"70%",float:"right"},id:"speedInput",onChange:function(){V(parseInt(document.getElementById("speedSelector").value)),J(parseInt(document.getElementById("speedSelector").value))},type:"range",value:D,min:"0",max:"50"},"id","speedSelector")),Object(h.jsx)("br",{}),Object(h.jsxs)("label",{for:"timeInput",children:["Time: ",W," sec"]}),Object(h.jsx)("input",Object(s.a)({style:{width:"70%",float:"right"},id:"timeInput",onChange:function(){K(parseInt(document.getElementById("timeSelector").value)%E)},type:"range",value:W,min:"0",max:E},"id","timeSelector"))]}),Object(h.jsx)(f.a,{layers:et,effects:M.effects,initialViewState:A,controller:!0,getTooltip:function(t){var e=t.object;return e&&e.m},children:Object(h.jsx)(l.a,{reuseMaps:!0,mapStyle:P,preventStyleDiffing:!0})})]})},C=function(t){t&&t instanceof Function&&i.e(3).then(i.bind(null,192)).then((function(e){var i=e.getCLS,n=e.getFID,o=e.getFCP,a=e.getLCP,r=e.getTTFB;i(t),n(t),o(t),a(t),r(t)}))};r.a.render(Object(h.jsx)(o.a.StrictMode,{children:Object(h.jsx)(I,{})}),document.getElementById("root")),C()},96:function(t,e){}},[[168,1,2]]]);
//# sourceMappingURL=main.03975199.chunk.js.map