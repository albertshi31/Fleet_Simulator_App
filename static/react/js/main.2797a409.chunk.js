(this["webpackJsonpfleet-simulator"]=this["webpackJsonpfleet-simulator"]||[]).push([[0],{160:function(e,t,n){},164:function(e,t){},168:function(e,t,n){"use strict";n.r(t);var i=n(4),o=n.n(i),a=n(120),c=n.n(a),s=(n(160),n(0)),r=n(17),l=n(13),d=n(142),u=n(136),b=n(177),j=n(124),p=n(184),g=n(188),f=n(186),h=n(191),x=n(178),O=n(19);var m=new u.a({color:[255,255,255],intensity:1}),v=new b.a({color:[255,255,255],intensity:2,position:[-74.762758,40.226667,8e3]}),I={buildingColor:[175,175,175],trailColor0:[255,0,0],trailColor1:[173,216,230],trailColor2:[0,0,139],trailColor3:[144,238,144],trailColor4:[0,100,0],material:{ambient:.1,diffuse:.6,shininess:32,specularColor:[60,64,70]},effects:[new j.a({ambientLight:m,pointLight:v})]},P={longitude:-74.762758,latitude:40.226667,zoom:12,pitch:45,bearing:0};var S=function(e){var t=e.buildings,n=void 0===t?BUILDINGS:t,o=e.depot_locations,a=void 0===o?DEPOT_LOCATIONS:o,c=e.trips,u=void 0===c?TRIPS:c,b=e.missed_passengers,j=void 0===b?MISSED_PASSENGERS:b,m=e.waiting,v=void 0===m?WAITING:m,S=e.trailLength,C=void 0===S?15:S,y=e.initialViewState,T=void 0===y?P:y,w=e.mapStyle,k=void 0===w?"https://basemaps.cartocdn.com/gl/positron-nolabels-gl-style/style.json":w,A=e.theme,E=void 0===A?I:A,M=e.loopLength,N=void 0===M?LOOP_LENGTH:M,_=e.startingAnimationSpeed,F=void 0===_?ANIMATION_SPEED:_,L=e.startTime,B=void 0===L?START_TIME:L,R=Object(i.useState)([]),z=Object(l.a)(R,2),D=z[0],G=z[1],V=Object(i.useState)(F),q=Object(l.a)(V,2),J=q[0],H=q[1],U=Object(i.useState)(J),W=Object(l.a)(U,2),Z=W[0],K=W[1],Q=Object(i.useState)(B),X=Object(l.a)(Q,2),Y=X[0],ee=X[1];!function(e){var t="AM";e/3600>=12&&(t="PM"),e/3600<=6||e/3600>=18?($("#time").css("background-color","black"),$("#time").css("color","white")):($("#time").css("background-color","white"),$("#time").css("color","black"));var n=Math.floor(e/3600)%12,i=Math.floor(e/60)%60,o=e%60;0==n&&(n=12),n=n<10?"0".concat(n):n,i=i<10?"0".concat(i):i,o=o<10?"0".concat(o):o;var a="".concat(n,":").concat(i,":").concat(o," ").concat(t);$("#time").text(a)}(Y),function(e){var t=METRIC_ANIMATIONS.NumOfActiveVehicles[e],n=METRIC_ANIMATIONS.NumOfActivePassengers[e],i=METRIC_ANIMATIONS.AVO[e],o=METRIC_ANIMATIONS.PassengersLeft[e],a=METRIC_ANIMATIONS.ServedPassengers[e];$("#AVO").html(i.toFixed(2).toString()),$("#NumOfActiveVehicles").html(t.toString()),$("#NumOfActivePassengers").html(n.toString()),$("#PassengersLeft").html(o.toString()),$("#ServedPassengers").html(a.toString())}(Y);var te=Object(i.useState)({}),ne=Object(l.a)(te,1)[0],ie=function e(){ee((function(e){return(e+J)%N})),ne.id=window.requestAnimationFrame(e)};Object(i.useEffect)((function(){return ne.id=window.requestAnimationFrame(ie),function(){return window.cancelAnimationFrame(ne.id)}}),[ne,J,Y,Z,D]);var oe=a.Coordinates,ae=[E.trailColor0,E.trailColor1,E.trailColor2,E.trailColor3,E.trailColor4],ce=[new x.a({id:"trips",data:u,getPath:function(e){return e.path},getTimestamps:function(e){return e.timestamps},getColor:function(e){var t=e.vendor;return D.includes(t)?[0,0,0,0]:ae[t]},updateTriggers:{getColor:D},opacity:.8,widthMinPixels:10,rounded:!0,trailLength:C,currentTime:Y,shadowEnabled:!1,pickable:!0}),new g.a({id:"buildings",data:n,extruded:!0,wireframe:!1,opacity:.5,getPolygon:function(e){return e.polygon},getElevation:function(e){return e.height},getFillColor:E.buildingColor,material:E.material}),new f.a({id:"waiting_passengers",data:v[Y],getPosition:function(e){return oe[e.c.split(" ")[0]]},getText:function(e){return e.c.split(" ")[1]},getSize:20,getColor:[255,0,0],getTextAnchor:"start",getAlignmentBaseline:"bottom",getPixelOffset:[5,5],parameters:{depthTest:!1}}),new f.a({id:"waiting_vehicles",data:v[Y],getPosition:function(e){return oe[e.c.split(" ")[0]]},getText:function(e){return e.c.split(" ")[2]},getSize:20,getColor:[79,130,247],getTextAnchor:"end",getAlignmentBaseline:"bottom",getPixelOffset:[-5,5],parameters:{depthTest:!1}}),new h.a({id:"missed_passengers",data:j[Y],getPosition:function(e){return oe[e.c]},getRadius:100,filled:!0,getFillColor:[255,0,0],opacity:.5,radiusMinPixels:1,radiusMaxPixels:200,parameters:{depthTest:!1},pickable:!0})];return Object(O.jsxs)("div",{children:[Object(O.jsxs)("div",{id:"topright",style:{position:"absolute",top:"0",right:"0",zIndex:"1"},children:[Object(O.jsx)("a",{href:"/graphs",children:"Go to Graphs"}),Object(O.jsxs)("div",{class:"my-legend",children:[Object(O.jsx)("div",{class:"legend-title",children:"Car Occupancy"}),Object(O.jsx)("div",{class:"legend-scale",children:Object(O.jsxs)("ul",{class:"legend-labels",children:[Object(O.jsxs)("li",{children:[Object(O.jsx)("input",{type:"checkbox",id:"zeroPax",value:"0",onClick:function(){var e="#zeroPax",t=Object(r.a)(D),n=[];n=$(e).prop("checked")?t.filter((function(t){return t!=parseInt($(e).val())})):t.concat(parseInt($(e).val())),console.log(n),G(n)}}),Object(O.jsxs)("label",{for:"zeroPax",children:[Object(O.jsx)("span",{style:{background:"#FF0000"}}),"Zero Passengers"]})]}),Object(O.jsxs)("li",{children:[Object(O.jsx)("input",{type:"checkbox",id:"onePax",value:"1",onClick:function(){var e="#onePax",t=Object(r.a)(D),n=[];n=$(e).prop("checked")?t.filter((function(t){return t!=parseInt($(e).val())})):t.concat(parseInt($(e).val())),console.log(n),G(n)}}),Object(O.jsxs)("label",{for:"onePax",children:[Object(O.jsx)("span",{style:{background:"#ADD8E6"}}),"One Passenger"]})]}),Object(O.jsxs)("li",{children:[Object(O.jsx)("input",{type:"checkbox",id:"twoPax",value:"2",onClick:function(){var e="#twoPax",t=Object(r.a)(D),n=[];n=$(e).prop("checked")?t.filter((function(t){return t!=parseInt($(e).val())})):t.concat(parseInt($(e).val())),console.log(n),G(n)}}),Object(O.jsxs)("label",{for:"twoPax",children:[Object(O.jsx)("span",{style:{background:"#00008B"}}),"Two Passengers"]})]}),Object(O.jsxs)("li",{children:[Object(O.jsx)("input",{type:"checkbox",id:"threePax",value:"3",onClick:function(){var e="#threePax",t=Object(r.a)(D),n=[];n=$(e).prop("checked")?t.filter((function(t){return t!=parseInt($(e).val())})):t.concat(parseInt($(e).val())),console.log(n),G(n)}}),Object(O.jsxs)("label",{for:"threePax",children:[Object(O.jsx)("span",{style:{background:"#90EE90"}}),"Three Passengers"]})]}),Object(O.jsxs)("li",{children:[Object(O.jsx)("input",{type:"checkbox",id:"fourPax",value:"4",onClick:function(){var e="#fourPax",t=Object(r.a)(D),n=[];n=$(e).prop("checked")?t.filter((function(t){return t!=parseInt($(e).val())})):t.concat(parseInt($(e).val())),console.log(n),G(n)}}),Object(O.jsxs)("label",{for:"fourPax",children:[Object(O.jsx)("span",{style:{background:"#006400"}}),"Four Passengers"]})]})]})})]})]}),Object(O.jsxs)("div",{style:{position:"absolute",bottom:"0",left:"30%",width:"40%",textAlign:"center",zIndex:"2"},children:[Object(O.jsx)("button",{onClick:function(){ee(Math.max(0,Y-1))},children:Object(O.jsx)("i",{class:"fas fa-step-backward"})}),Object(O.jsx)("button",{onClick:function(){H(Z)},children:Object(O.jsx)("i",{class:"fa fa-play"})}),Object(O.jsx)("button",{onClick:function(){K(J),H(0)},children:Object(O.jsx)("i",{class:"fa fa-stop"})}),Object(O.jsx)("button",{onClick:function(){ee((Y+1)%N)},children:Object(O.jsx)("i",{class:"fas fa-step-forward"})}),Object(O.jsx)("button",{onClick:function(){K(1),H(1),ee(0)},children:Object(O.jsx)("i",{class:"fas fa-redo"})}),Object(O.jsx)("br",{}),Object(O.jsxs)("label",{for:"speedInput",children:["Speed: ",J,"x"]}),Object(O.jsx)("input",Object(s.a)({style:{width:"70%",float:"right"},id:"speedInput",onChange:function(){H(parseInt(document.getElementById("speedSelector").value)),K(parseInt(document.getElementById("speedSelector").value))},type:"range",value:J,min:"0",max:"50"},"id","speedSelector")),Object(O.jsx)("br",{}),Object(O.jsxs)("label",{for:"timeInput",children:["Time: ",Y," sec"]}),Object(O.jsx)("input",Object(s.a)({style:{width:"70%",float:"right"},id:"timeInput",onChange:function(){ee(parseInt(document.getElementById("timeSelector").value)%N)},type:"range",value:Y,min:"0",max:N},"id","timeSelector"))]}),Object(O.jsx)(p.a,{layers:ce,effects:E.effects,initialViewState:T,controller:!0,getTooltip:function(e){var t=e.object;return t&&t.m},children:Object(O.jsx)(d.a,{reuseMaps:!0,mapStyle:k,preventStyleDiffing:!0})})]})},C=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,192)).then((function(t){var n=t.getCLS,i=t.getFID,o=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),i(e),o(e),a(e),c(e)}))};c.a.render(Object(O.jsx)(o.a.StrictMode,{children:Object(O.jsx)(S,{})}),document.getElementById("root")),C()},96:function(e,t){}},[[168,1,2]]]);
//# sourceMappingURL=main.2797a409.chunk.js.map